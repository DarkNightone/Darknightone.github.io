<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Building React From Scratch</title>
    <style>
      .broad{
        display:flex;
        width:600px;
        height:600px;
        flex-direction:row;
        flex-wrap:wrap;
        justify-content: flex-start;
        padding: 20px;
      }
      .square{
        width:200px;
        height:200px;
        box-sizing:border-box;
        border:5px solid black;
        font-size: 5em;
        display:flex;
        justify-content: center;
        align-items: center;
      }
      .square:hover{
        background-color: #80cd92;
        cursor: pointer;
      }
    </style>
  </head>
  <body>
      <div class="render-target">

      </div>

      <script>
        var gameState={
            PLAYER_one_SYMBOL:'X',
            PLAYER_Two_SYMBOL:'O',
            currentTurn:'X',
            broad:[
                "","","","","","","","",""
            ]

        }
        var render=function(state){
            
            document.querySelector('.render-target').innerHTML= "<div class='broad'>"+
              "<div class='square' data-square-id='0'>"+state.broad[0]+"</div>"+
              "<div class='square' data-square-id='1'>"+state.broad[1]+"</div>"+
              "<div class='square' data-square-id='2'>"+state.broad[2]+"</div>"+
              "<div class='square' data-square-id='3'>"+state.broad[3]+"</div>"+
              "<div class='square' data-square-id='4'>"+state.broad[4]+"</div>"+
              "<div class='square' data-square-id='3'>"+state.broad[5]+"</div>"+
              "<div class='square' data-square-id='6'>"+state.broad[6]+"</div>"+
              "<div class='square' data-square-id='7'>"+state.broad[7]+"</div>"+
              "<div class='square' data-square-id='8'>"+state.broad[8]+"</div>"+
              "</div>"
              return
        }
          render(gameState)

          var broad=document.querySelector('.broad')

          broad.addEventListener('click',function(e){

            var squareIndex=parseInt(e.target.dataset['squareId'],10)

            gameState.broad[squareIndex]=gameState.currentTurn

            gameState.currentTurn=gameState.currentTurn===gameState.PLAYER_One_SYMBOL ? gameState.PLAYER_Two_SYMBOL : gameState.PLAYER_One_SYMBOL
              debugger
            if(checkForWinner()){
              alert("You Won!!")
            }
            render(gameState)
          
          })




          function checkForWinner(){
            var squares=gameState.broad;

            var symbols=squares.map(function(square){
              return gameState.broad.innerHTML;
            })
            var winningCombos=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];

            return  winningCombos.find(function(combo){
              if(symbols[combo[0]]==symbols[combo[1]]&&symbols[combo[1]]==symbols[combo[2]]){
                return symbols[combo[0]];
              }
              else{
                return false;
              }
            })

            }

      </script>
  </body>
</html>
