<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Canvas</title>

    <style>
        canvas{
          border: 1px solid #000;
          position:absolute;
          margin: auto;
          top: 0;
          bottom: 0;
          left: 0;
          right: 0;
        }

    </style>
  </head>
  <body>


    <script>
    var canvas,ctx;
    var data;
    window.onload=function main(){

      canvas=document.createElement('canvas')
      canvas.height=canvas.width=200
      ctx=canvas.getContext('2d')
      document.body.appendChild(canvas)

    init()
    tick()

    }

    function init(){
      data=new Tile(20,20)
    }

    function tick(){
      window.requestAnimationFrame(tick)
      update()
      render()
    }

    function update(){


    }

    function render(){
      data.draw(_ctx)

    }

    function Tile(x,y){
      var x=x,y=y;

      var tile = Tile.BLANK
      if(tile===null){
        var _c=document.createElement('canvas')
        _c.height=_c.width=100;

        _ctx=_c.getContext('2d')

        _ctx.fillStyle='skyblue'

        _ctx.fillRect(0,0,100,100)

        Tile.BLANK=new Image()
        Tile.BLANK.src=_c.toDataURL();
        tile=Tile.BLANK
      }

       this.update=function(){

       }
       this.draw=function(_ctx){
         _ctx.drawImage(tile,x,y)
       }
    }
    </script>
  </body>
</html>
